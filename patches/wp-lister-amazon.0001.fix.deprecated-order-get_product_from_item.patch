From bf2b79174b5bcec4a329f75264b2329f476ebe73 Mon Sep 17 00:00:00 2001
From: Daniel Kudwien <daniel@netzstrategen.com>
Date: Mon, 25 Jan 2021 18:43:33 +0100
Subject: [PATCH] Fixed deprecation warning for $order::get_product_from_item()
 to be replaced by $item->get_product().

---
 classes/core/WPLA_CronActions.php | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/classes/core/WPLA_CronActions.php b/classes/core/WPLA_CronActions.php
index 7f4c416cb..3e6a0ef3b 100644
--- a/classes/core/WPLA_CronActions.php
+++ b/classes/core/WPLA_CronActions.php
@@ -879,7 +879,7 @@ class WPLA_CronActions {
 					WPLA()->logger->info('processing variation ID ' . $variation_id . ' - SKU: '.$sku);
 				}
 
-				$_product = $order->get_product_from_item( $item );
+				$_product = version_compare( WC_VERSION, '3.0', '<' ) ? $order->get_product_from_item( $item ) : $item->get_product();
 				if ( $_product && $_product->exists() && $_product->managing_stock() ) {
 
 					// reduce quantity for simple product
-- 
2.30.1

