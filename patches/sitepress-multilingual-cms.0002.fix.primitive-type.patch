From a3ba30f7bd60e2183af3ae7cac3a0c12eaccdae5 Mon Sep 17 00:00:00 2001
From: Fabian Marz <fabian@netzstrategen.com>
Date: Tue, 9 May 2023 15:59:22 +0200
Subject: [PATCH] Fixed wrong primitives cause comparisons to fail.

---
 .../class-wpml-media-attachments-duplication.php            | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/classes/media/duplication/class-wpml-media-attachments-duplication.php b/classes/media/duplication/class-wpml-media-attachments-duplication.php
index 6ad18d0b7..f5d9b15c5 100644
--- a/classes/media/duplication/class-wpml-media-attachments-duplication.php
+++ b/classes/media/duplication/class-wpml-media-attachments-duplication.php
@@ -685,7 +685,7 @@ class WPML_Media_Attachments_Duplication {
 				 || $this->is_feature_image_marked_to_duplication( $pidd )
 			) {
 				$translations_prepared = $this->wpdb->prepare( "SELECT element_id FROM {$this->wpdb->prefix}icl_translations WHERE trid = %d", array( $icl_trid ) );
-				$translations          = $this->wpdb->get_col( $translations_prepared );
+				$translations          = array_map( 'intval', $this->wpdb->get_col( $translations_prepared ) );
 
 				foreach ( $translations as $element_id ) {
 					if ( $element_id && $element_id != $pidd ) {
@@ -695,9 +695,9 @@ class WPML_Media_Attachments_Duplication {
 
 						if ( $this->is_media_marked_to_duplication( $element_id ) ) {
 							$source_attachments_prepared = $this->wpdb->prepare( "SELECT ID FROM {$this->wpdb->posts} WHERE post_parent = %d AND post_type = %s", array( $pidd, 'attachment' ) );
-							$source_attachments          = $this->wpdb->get_col( $source_attachments_prepared );
+							$source_attachments          = array_map( 'intval', $this->wpdb->get_col( $source_attachments_prepared ) );
 							$attachments_prepared        = $this->wpdb->prepare( "SELECT ID FROM {$this->wpdb->posts} WHERE post_parent = %d AND post_type = %s", array( $element_id, 'attachment' ) );
-							$attachments                 = $this->wpdb->get_col( $attachments_prepared );
+							$attachments                 = array_map( 'intval', $this->wpdb->get_col( $attachments_prepared ) );
 
 							foreach ( $source_attachments as $source_attachment_id ) {
 								foreach ( $attachments as $attachment_id ) {
-- 
2.30.2

