From d7635fb492b94fb0cd41a9709f8af1a95cb9c216 Mon Sep 17 00:00:00 2001
From: Daniel Kudwien <daniel@netzstrategen.com>
Date: Mon, 25 Jan 2021 18:43:13 +0100
Subject: [PATCH] Fixed deprecation warning for $order::get_product_from_item()
 to be replaced by $item->get_product().

---
 templates/woocommerce/emails/email-order-items.php       | 3 ++-
 templates/woocommerce/emails/plain/email-order-items.php | 3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/templates/woocommerce/emails/email-order-items.php b/templates/woocommerce/emails/email-order-items.php
index 8b778a1f7..10256652c 100644
--- a/templates/woocommerce/emails/email-order-items.php
+++ b/templates/woocommerce/emails/email-order-items.php
@@ -14,7 +14,8 @@ if ( ! defined( 'ABSPATH' ) ) {
 global $woocommerce;
 
 foreach ( $items as $item_id => $item ) :
-	$_product     = apply_filters( 'woocommerce_order_item_product', $order->get_product_from_item( $item ), $item );
+	$_product = version_compare( WC_VERSION, '3.0', '<' ) ? $order->get_product_from_item( $item ) : $item->get_product();
+	$_product = apply_filters( 'woocommerce_order_item_product', $_product, $item );
 
 	if ( apply_filters( 'woocommerce_order_item_visible', true, $item ) ) :
 	?>
diff --git a/templates/woocommerce/emails/plain/email-order-items.php b/templates/woocommerce/emails/plain/email-order-items.php
index 63750922c..8f0feae0a 100644
--- a/templates/woocommerce/emails/plain/email-order-items.php
+++ b/templates/woocommerce/emails/plain/email-order-items.php
@@ -14,7 +14,8 @@ if ( ! defined( 'ABSPATH' ) ) {
 global $woocommerce;
 
 foreach ( $items as $item_id => $item ) :
-	$_product     = apply_filters( 'woocommerce_order_item_product', $order->get_product_from_item( $item ), $item );
+	$_product = version_compare( WC_VERSION, '3.0', '<' ) ? $order->get_product_from_item( $item ) : $item->get_product();
+	$_product = apply_filters( 'woocommerce_order_item_product', $_product, $item );
 
 	if ( apply_filters( 'woocommerce_order_item_visible', true, $item ) ) {
 
-- 
2.30.1

